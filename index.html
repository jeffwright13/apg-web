<!doctype html>
<html lang="en" data-theme="auto">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Audio Program Generator</title>
    <meta
      name="description"
      content="Generate spoken audio programs from text with optional background music"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
    />
    <link rel="stylesheet" href="styles/custom.css" />
  </head>
  <body>
    <main class="container">
      <header>
        <h1>Audio Program Generator</h1>
        <p>
          Create spoken audio programs from text with optional background music
        </p>
        <div id="browser-warning" style="display: none">
          <small style="color: var(--del-color)">
            ‚ö†Ô∏è <strong>Browser Compatibility:</strong> Web Speech API audio
            quality varies significantly by browser. <strong>Chrome</strong>
            provides the best results. Firefox and Safari may produce poor
            quality audio. For consistent, high-quality audio across all
            browsers, premium TTS integration is coming soon.
          </small>
        </div>
      </header>

      <section id="input-section">
        <article>
          <header><h2>Input</h2></header>

          <form id="apg-form">
            <!-- Phrase File -->
            <label for="phrase-file">
              Phrase File
              <small>Text file with phrases and pauses (required)</small>
            </label>
            <div style="display: flex; gap: 0.5rem; align-items: center">
              <input
                type="file"
                id="phrase-file"
                name="phrase-file"
                accept=".txt"
                required
                style="flex: 1"
              />
              <button
                type="button"
                id="clear-phrase-btn"
                class="secondary"
                style="flex: 0 0 auto"
                title="Clear phrase file"
              >
                Clear
              </button>
            </div>

            <!-- Sound File -->
            <label for="sound-file">
              Background Sound
              <small>Optional .wav file to mix with speech</small>
            </label>
            <div style="display: flex; gap: 0.5rem; align-items: center">
              <input
                type="file"
                id="sound-file"
                name="sound-file"
                accept=".wav"
                style="flex: 1"
              />
              <button
                type="button"
                id="clear-sound-btn"
                class="secondary"
                style="flex: 0 0 auto"
                title="Clear background sound file"
              >
                Clear
              </button>
            </div>

            <!-- TTS Engine -->
            <label for="tts-engine">
              Text-to-Speech Engine
              <select id="tts-engine" name="tts-engine">
                <option value="google-cloud">
                  Google Cloud TTS (Free tier - Recommended)
                </option>
                <option value="web-speech">
                  Web Speech API (Free - Playback only, browser-dependent quality)
                </option>
                <option value="elevenlabs" disabled>
                  ElevenLabs (Premium - Coming soon)
                </option>
              </select>
            </label>
            <small style="color: var(--muted-color)">
              üí° Web Speech API plays directly through speakers. For audio
              export and background mixing, premium TTS engines will be added
              soon.
            </small>

            <!-- Options -->
            <details>
              <summary>Advanced Options</summary>

              <label>
                <input type="checkbox" id="slow-speech" name="slow-speech" />
                Slow speech (half speed)
              </label>

              <label for="attenuation">
                Background attenuation (dB)
                <input
                  type="number"
                  id="attenuation"
                  name="attenuation"
                  value="0"
                  min="-20"
                  max="20"
                />
              </label>

              <label for="fade-in">
                Fade in (ms)
                <input
                  type="number"
                  id="fade-in"
                  name="fade-in"
                  value="3000"
                  min="0"
                  max="10000"
                  step="100"
                />
              </label>

              <label for="fade-out">
                Fade out (ms)
                <input
                  type="number"
                  id="fade-out"
                  name="fade-out"
                  value="6000"
                  min="0"
                  max="10000"
                  step="100"
                />
              </label>
            </details>

            <div style="display: flex; gap: 1rem">
              <button type="submit" id="generate-btn" style="flex: 1">
                Generate Audio
              </button>
              <button
                type="button"
                id="reset-btn"
                class="secondary"
                style="flex: 0 0 auto"
              >
                Clear All
              </button>
            </div>
          </form>
        </article>
      </section>

      <section id="progress-section" style="display: none">
        <article>
          <header><h2>Progress</h2></header>
          <progress id="progress-bar" value="0" max="100"></progress>
          <p id="progress-text">Initializing...</p>
        </article>
      </section>

      <section id="output-section" style="display: none">
        <article>
          <header><h2>Output</h2></header>
          <div id="playback-controls" style="display: none">
            <p id="playback-message" style="text-align: center"></p>
            <div style="display: flex; gap: 1rem; justify-content: center">
              <button id="play-btn">‚ñ∂ Play Audio</button>
              <button id="stop-btn" class="secondary">‚èπ Stop</button>
            </div>
          </div>
          <div id="download-controls" style="display: none">
            <audio id="audio-player" controls></audio>
            <button id="download-btn">Download Audio</button>
          </div>
        </article>
      </section>

      <footer>
        <small
          >Audio Program Generator v1.0.0 | Created by Jeff Wright |
          <a href="https://github.com/jeffwright13/apg-web">GitHub</a></small
        >
      </footer>
    </main>

    <script type="module" src="scripts/main.js"></script>
  </body>
</html>
